<!doctype>
<html lang="en">

<head>
    <title>Administrador de Reservas</title>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <!-- JS for jQuery -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <!-- Bootstrap CSS v5.2.1 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous" />
    <!-- FontAwesome 6.2.0 CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css" integrity="sha512-xh6O/CkQoPOWDdYTDqeRdPCVd1SpvCA9XXcUnZS2FmJNp1coAFzvtCN9BmamE+4aHK8yyUHUSCcJHgXloTyT2A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,100,0,200" />
    <!-- (Optional) Use CSS or JS implementation -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/js/all.min.js" integrity="sha512-naukR7I+Nk6gp7p5TMA4ycgfxaZBJ7MO5iC3Fp6ySQyKFHOGfpkSZkYVWV5R7u7cfAicxanwYQ5D1e17EfJcMA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <!-- <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.10/index.global.min.js"></script> -->
    <script src="https://cdn.jsdelivr.net/npm/fullcalendar-scheduler@6.1.10/index.global.min.js"></script>
    <script src='fullcalendar/dist/index.global.js'></script>
    {{!-- CDN Data tables --}}
    <link rel="stylesheet" href="https://cdn.datatables.net/1.11.5/css/jquery.dataTables.min.css">
    <link rel="stylesheet" href="/styles/style.css">
    <link rel="stylesheet" href="/styles/styles.css">
</head>

<body>
    <div class="container-fluid"></div>
    <div class="row flex-nowrap" style="min-height: 100%;">

        <!-- Nav bar -->
        <div class="bg-dark col-2 min-vh-100 d-flex flex-column justify-content-between navbar" >
                <div class="bg-dark p-2">
                    <a href="" class="d-flex text-decoration-none mt-1 align-items-center text-white">
                        <span class="fs-4 d-none d-sm-inline">Alta de caba√±a</span>
                    </a>
                    
                    <!-- Side menu -->
                    <ul id="side-menu" class="nav nav-pills flex-column mt-4 "></ul>
                    
                </div>

                <div class="dropdown open p-3">
                    <button class="btn border-none dropdown-toggle text-white" type="button" id="triggerId"
                        data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        <i class="fa fa-user"></i><span class="ms-2">Efren</span>
                    </button>
                    <div class="dropdown-menu" aria-labelledby="triggerId">
                        <button class="dropdown-item" href="#">Setting</button>
                        <button class="dropdown-item" href="#">Profile</button>
                    </div>
                </div>
        </div>

        <!-- Content -->
        <div style="width: 260px;"></div>
        <div style="max-width: calc(100% - 270px); max-height: 100%; padding: 0; background-color: #053537;">
            {{{body}}}
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js" integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+" crossorigin="anonymous"></script>
    {{!-- cdn data tables --}}
    <script src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.min.js"></script>

    <!-- Retrieve side menu content depending on privilege -->
    <script>
        document.addEventListener("DOMContentLoaded", function(){
            fetch("/sidemenu", {
                method: "GET",
                headers: {
                    // Once logged in, the authorization token stored inthe session cookies will automatically be added in each HTTP request.
                    'Content-Type': 'application/json'
                }
            })
            .then(response => {
                if (!response.ok) {
                    const error = response.statusText;
                    //document.getElementById("txtCreateChaletError").innerHTML = "Error en la solicitud: " + error.toLowerCase() + ".";
                    alert("Error en la solicitud: " + error.toLowerCase() + ".");
                    throw new Error('Error en la solicitud: ' + error);
                }
                return response.json();
            })
            .then(async data => {
                console.log('Respuesta del servidor:', data);  
                document.getElementById("side-menu").innerHTML = data.sideMenuContent;
            })
            .catch(error => {
                console.error('Error al enviar la solicitud:', error);
            });  

        });
    </script>
</body>